<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href = "../css/CreateUser.css" rel = "stylesheet">
  <link rel="stylesheet" type="text/css" href="css/login.css">
  
  <title> Wallet </title>
 <script>
 async function register(id) {
	alert("aaaaa");
    const inputs = document.getElementById(id).elements;
    var firstName = inputs['firstName'].value;
    var lastName = inputs['lastName'].value;
    var password = inputs['password'].value;
    var phone = inputs['phone'].value;
    var email = inputs['email'].value;
    var confirmPassword = inputs['confirmPassword'].value;
	
    if (confirmPassword != password) {
        alert("wrong");
        return 0;
    }
    var data = {
        "firstName": firstName,
        "lastName": lastName,
        "password": password,
        "phone": phone,
		"email" : email,
    }
    await fetch('http://localhost:5000/user', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: {
            'Content-Type': 'application/json'
        }
    }).then(async (response) => {
        var res = await response.json();
        if (response.status == 200) {
            var token = res.access_token
            localStorage.setItem('token', token);
            window.location.replace("../index.html");
        }
        else {
            alert(res.info);
            var result = confirm("you arent unique. please be, ok?");
            if (!result) {
                Location.reload()
            }
        }
    });
}
</script>
</head>
  <body>
    <form class="form">
        <label for = "name">
          <b>  First name  </b>
        </label>
        <input type = "text" name = "firstName" placeholder = "Enter first name" name = "uname" required>

        <label for = "name">
          <b>  Last name  </b>
        </label>
        <input type = "text" name = "lastName" placeholder = "Enter last name" name = "uname" required>

        <label for = "name">
          <b>  Email  </b>
        </label>
        <input type = "text" name = "email" placeholder = "Enter email" name = "uname" required>

       <label for = "name">
          <b>  Phone  </b>
        </label>
        <input type = "text" name = "phone" placeholder = "Enter phone" name = "uname" required>

        <label for = "pas">
          <b> Password </b> 
        </label>
        <input type = "password" name = "password" placeholder = "Enter Password" name = "pas" required>

        <label for = "pas">
          <b> Confrim password </b> 
        </label>
        <input type = "password" name = "confirmPassword" placeholder = "Confrim password" name = "pas" required>

        <p> Select user type </p>
        <div>
           <input type = "checkbox" id = "Admin" name = "pas" checked>
          <label for = "pas"> Admin </label>
        </div>
        <div>
          <input type = "checkbox" id = "Common user" name = "pas">
          <label for = "pas"> Common user </label>
       </div>
    </form>
    <button type = "submit" onclick = "register('register')"> Create user </button>
    <button type = "reset"> Cancel </button>
  
  <script src="../js/CreateUser.js"></script>
  </body>
</html>